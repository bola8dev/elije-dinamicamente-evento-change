<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evento Change países</title>
    <link rel="stylesheet" href="/estilos.css">
</head>
<body>

    <header>
        <h1>Ejercicio javascript</h1> 
        <h2>Evento change, elije dinámicamente paises y ciudades</h2>
    </header>

    <div class="formu">
    <form>
        <select name="" id="paises">
            <option value="">-- seleccionar país --</option>
            <option value="colombia">Colombia</option>
            <option value="espana">España</option>
        </select>
        <select name="" id="ciudades" style="display: none;"></select>
        <br>
        <br>
        <output id="outputSelect"></output>
    </form>
    </div>
    

    <script>
        let paises = {
            "colombia" : [
                'Santa Marta',
                'Cali',
                'Bogotá',
                'Medellín',
                'Barranquilla',
            ],
            "espana" : [
                'Madrid',
                'Valencia',
                'Barcelona',
                'Sevilla',
                'Bilbao',
            ]
        };

        let selectPaises   = document.getElementById( 'paises' ),
            selectCiudades = document.getElementById( 'ciudades' ),
            outputSelect   = document.getElementById( 'outputSelect' );

        selectPaises.addEventListener( 'change', function() {
            if( this.value !== '' ) {

                let opts = makeOptions( paises[ this.value ] );
                selectCiudades.innerHTML = opts;
                selectCiudades.style.display = 'inline-block';
            
            } else {
                selectCiudades.style.display = 'none';
                selectCiudades.innerHTML = '';
                outputSelect.innerHTML = '';
            }
        });

        function makeOptions( values ) {

            let opts = '<option value="">-- seleccionar ciudad --</option>';

            values.forEach( value => {
                opts += `<option value="${value}">${value}</option>`;
            });

            return opts;

        }

        selectCiudades.addEventListener( 'change', function() {

            if( this.value !== '' ) {
                outputSelect.innerHTML = `Tu selección: <br> País: ${selectPaises.options[ selectPaises.selectedIndex ].text}<br>Ciudad: ${this.value}`;
            } else {
                outputSelect.innerHTML = '';
            }

        });

    </script>
</body>
</html>